# MQTT小程序服务器配置功能说明

## 功能概述
本小程序现在支持自定义MQTT服务器配置，用户可以选择预设服务器或自定义服务器地址。

## 主要功能

### 1. 预设服务器选择
- EMQX 公共服务器 (broker.emqx.io:8084 wss)
- EMQX 公共服务器非加密版 (broker.emqx.io:8083 ws)
- Mosquitto 测试服务器 (test.mosquitto.org:8081 wss)
- HiveMQ 公共服务器 (broker.hivemq.com:8884 wss)

### 2. 自定义服务器配置
用户可以配置：
- 服务器地址 (broker)
- 端口号 (port)
- 协议类型 (wss/ws)
- 客户端ID (可自动生成)

### 3. 服务器管理功能
- 保存自定义服务器到列表
- 从列表中选择已保存的服务器
- 删除不需要的自定义服务器
- 重置为默认配置

## 使用方法

1. 点击"更改服务器配置"按钮
2. 在弹出的对话框中选择：
   - 预设服务器：直接点击选择
   - 自定义配置：填写相关信息后点击"保存配置"
   - 添加到自定义列表：将当前配置保存到自定义服务器列表
3. 点击"保存配置"应用新设置
4. 返回主界面进行MQTT连接测试

## 技术实现

### 核心文件修改：
- utils/mqtt.js：添加服务器配置管理功能
- pages/index/index.js：添加UI交互逻辑
- pages/index/index.wxml：添加配置界面
- pages/index/index.wxss：添加样式支持

### 数据存储：
- 使用wx.setStorageSync本地存储自定义服务器配置
- 支持多个自定义服务器的保存和管理
- 配置信息持久化存储

## 注意事项
- 修改服务器配置后需要重新连接
- 建议在开发环境下关闭域名校验进行测试
- 生产环境需要将服务器域名添加到request合法域名列表
